# Contribuindo para o PDF Table Scanner

Obrigado por seu interesse em contribuir com o PDF Table Scanner! Este documento fornece diretrizes e informa√ß√µes para contribuidores.

## üìã √çndice

1. [Como Contribuir](#como-contribuir)
2. [Reportando Bugs](#reportando-bugs)
3. [Sugerindo Melhorias](#sugerindo-melhorias)
4. [Desenvolvimento](#desenvolvimento)
5. [Padr√µes de C√≥digo](#padr√µes-de-c√≥digo)
6. [Processo de Pull Request](#processo-de-pull-request)
7. [Configura√ß√£o do Ambiente](#configura√ß√£o-do-ambiente)

## ü§ù Como Contribuir

Existem v√°rias maneiras de contribuir:

- üêõ **Reportar bugs**
- üí° **Sugerir melhorias**
- üìù **Melhorar documenta√ß√£o**
- üíª **Contribuir com c√≥digo**
- üß™ **Escrever testes**
- üåç **Traduzir a interface**

## üêõ Reportando Bugs

Antes de reportar um bug:

1. **Verifique se j√° foi reportado** nas [Issues](https://github.com/Mablemb/pdf-table-scanner/issues)
2. **Teste com a vers√£o mais recente**
3. **Reproduza o problema** com passos claros

### Template para Bug Report

```markdown
**Descri√ß√£o do Bug**
Uma descri√ß√£o clara e concisa do que √© o bug.

**Para Reproduzir**
Passos para reproduzir o comportamento:
1. V√° para '...'
2. Clique em '....'
3. Fa√ßa scroll at√© '....'
4. Veja o erro

**Comportamento Esperado**
Uma descri√ß√£o clara do que voc√™ esperava que acontecesse.

**Screenshots**
Se aplic√°vel, adicione screenshots para ajudar a explicar o problema.

**Ambiente:**
- SO: [ex: Windows 10, Ubuntu 20.04, macOS Big Sur]
- Vers√£o do Python: [ex: 3.8.5]
- Vers√£o do PyQt5: [ex: 5.15.4]
- Vers√£o do projeto: [ex: 1.0.0]

**Informa√ß√µes Adicionais**
Qualquer outro contexto sobre o problema aqui.
```

## üí° Sugerindo Melhorias

Para sugerir uma melhoria:

1. **Abra uma Issue** com o label `enhancement`
2. **Descreva a funcionalidade** detalhadamente
3. **Explique o caso de uso** e benef√≠cios
4. **Considere implementa√ß√µes alternativas**

### Template para Feature Request

```markdown
**A funcionalidade est√° relacionada a um problema? Descreva.**
Uma descri√ß√£o clara do problema. Ex: Estou sempre frustrado quando [...]

**Descreva a solu√ß√£o que voc√™ gostaria**
Uma descri√ß√£o clara do que voc√™ quer que aconte√ßa.

**Descreva alternativas consideradas**
Uma descri√ß√£o clara de solu√ß√µes ou funcionalidades alternativas.

**Contexto Adicional**
Qualquer outro contexto ou screenshots sobre a funcionalidade aqui.
```

## üíª Desenvolvimento

### Configura√ß√£o do Ambiente

```bash
# 1. Fork o reposit√≥rio no GitHub

# 2. Clone seu fork
git clone https://github.com/SEU_USUARIO/pdf-table-scanner.git
cd pdf-table-scanner

# 3. Adicione o reposit√≥rio original como upstream
git remote add upstream https://github.com/Mablemb/pdf-table-scanner.git

# 4. Crie um ambiente virtual
python -m venv venv
source venv/bin/activate  # Linux/macOS
# ou
venv\Scripts\activate  # Windows

# 5. Instale depend√™ncias de desenvolvimento
pip install -r requirements.txt
pip install -r requirements-dev.txt  # quando existir

# 6. Crie uma branch para sua feature
git checkout -b feature/nova-funcionalidade
```

### Estrutura do Projeto

```
pdf-table-scanner/
‚îú‚îÄ‚îÄ extrator_tabelas_pdf.py    # Aplica√ß√£o principal
‚îú‚îÄ‚îÄ LivrosPDF/                 # PDFs de teste
‚îú‚îÄ‚îÄ tabelas/                   # Sa√≠da de exemplo
‚îú‚îÄ‚îÄ tests/                     # Testes (futuro)
‚îú‚îÄ‚îÄ docs/                      # Documenta√ß√£o adicional (futuro)
‚îú‚îÄ‚îÄ README.md                  # Documenta√ß√£o principal
‚îú‚îÄ‚îÄ DOCUMENTATION.md           # Docs t√©cnicas
‚îú‚îÄ‚îÄ INSTALL.md                 # Guia de instala√ß√£o
‚îú‚îÄ‚îÄ CONTRIBUTING.md            # Este arquivo
‚îú‚îÄ‚îÄ CHANGELOG.md               # Hist√≥rico de mudan√ßas
‚îî‚îÄ‚îÄ requirements.txt           # Depend√™ncias
```

## üìè Padr√µes de C√≥digo

### Estilo Python

Seguimos o [PEP 8](https://pep8.org/) com algumas adapta√ß√µes:

```python
# ‚úÖ Correto
def carregar_pdf(self, caminho_arquivo):
    """
    Carrega um arquivo PDF e renderiza suas p√°ginas.
    
    Args:
        caminho_arquivo (str): Caminho para o arquivo PDF
        
    Returns:
        bool: True se carregado com sucesso
    """
    try:
        self.doc = fitz.open(caminho_arquivo)
        return True
    except Exception as e:
        logging.error(f"Erro ao carregar PDF: {e}")
        return False

# ‚ùå Incorreto
def carregarPdf(self,caminhoArquivo):
    self.doc=fitz.open(caminhoArquivo)
```

### Coment√°rios e Documenta√ß√£o

```python
# ‚úÖ Bons coment√°rios
class PDFTableExtractor(QWidget):
    """
    Widget principal para extra√ß√£o de tabelas de PDF.
    
    Esta classe gerencia a interface gr√°fica e coordena as opera√ß√µes
    de visualiza√ß√£o, sele√ß√£o e extra√ß√£o de tabelas.
    """
    
    def __init__(self):
        super().__init__()
        self.selections = []  # Lista de sele√ß√µes: [(start, end), ...]
        self.init_ui()

# ‚ùå Coment√°rios desnecess√°rios
x = x + 1  # Incrementa x em 1
```

### Tratamento de Erros

```python
# ‚úÖ Tratamento espec√≠fico
try:
    self.doc = fitz.open(self.pdf_path)
except fitz.FileNotFoundError:
    QMessageBox.critical(self, "Erro", "Arquivo PDF n√£o encontrado")
except fitz.FileDataError:
    QMessageBox.critical(self, "Erro", "Arquivo PDF corrompido")
except Exception as e:
    QMessageBox.critical(self, "Erro", f"Erro inesperado: {e}")

# ‚ùå Captura gen√©rica demais
try:
    # c√≥digo que pode falhar
    pass
except:
    pass
```

### Nomes de Vari√°veis

```python
# ‚úÖ Nomes descritivos
page_index = 0
selection_rectangle = QRect()
pdf_document_path = "/path/to/file.pdf"

# ‚ùå Nomes n√£o descritivos
i = 0
rect = QRect()
path = "/path/to/file.pdf"
```

## üîÑ Processo de Pull Request

### Antes de Submeter

1. **Teste sua mudan√ßa** completamente
2. **Atualize a documenta√ß√£o** se necess√°rio
3. **Adicione testes** quando aplic√°vel
4. **Execute linting** e corrija problemas
5. **Verifique se n√£o quebrou funcionalidades existentes**

### Criando o Pull Request

1. **Commit suas mudan√ßas**:
   ```bash
   git add .
   git commit -m "feat: adiciona detec√ß√£o autom√°tica de tabelas"
   ```

2. **Push para seu fork**:
   ```bash
   git push origin feature/nova-funcionalidade
   ```

3. **Abra um Pull Request** no GitHub

### Template para Pull Request

```markdown
**Descri√ß√£o**
Breve descri√ß√£o das mudan√ßas realizadas.

**Tipo de Mudan√ßa**
- [ ] Bug fix (mudan√ßa que corrige um problema)
- [ ] Nova funcionalidade (mudan√ßa que adiciona funcionalidade)
- [ ] Breaking change (corre√ß√£o ou funcionalidade que quebra compatibilidade)
- [ ] Atualiza√ß√£o de documenta√ß√£o

**Como Foi Testado?**
Descreva os testes realizados para verificar as mudan√ßas.

**Checklist:**
- [ ] Meu c√≥digo segue os padr√µes do projeto
- [ ] Realizei auto-revis√£o do c√≥digo
- [ ] Comentei o c√≥digo em partes dif√≠ceis de entender
- [ ] Atualizei a documenta√ß√£o correspondente
- [ ] Minhas mudan√ßas n√£o geram novos warnings
- [ ] Testei que funciona conforme esperado
```

### Conven√ß√µes de Commit

Usamos [Conventional Commits](https://www.conventionalcommits.org/):

```bash
# Tipos principais
feat: nova funcionalidade
fix: corre√ß√£o de bug
docs: mudan√ßas na documenta√ß√£o
style: formata√ß√£o, pontos e v√≠rgulas, etc
refactor: mudan√ßa de c√≥digo que n√£o adiciona funcionalidade nem corrige bugs
test: adi√ß√£o ou corre√ß√£o de testes
chore: mudan√ßas no processo de build, ferramentas auxiliares, etc

# Exemplos
git commit -m "feat: adiciona suporte para OCR em tabelas"
git commit -m "fix: corrige crash ao abrir PDFs grandes"
git commit -m "docs: atualiza guia de instala√ß√£o"
git commit -m "refactor: simplifica l√≥gica de sele√ß√£o"
```

## üß™ Testes

### Executando Testes

```bash
# Quando implementados
python -m pytest tests/
python -m pytest tests/ --cov=extrator_tabelas_pdf
```

### Escrevendo Testes

```python
import unittest
from unittest.mock import patch, MagicMock
from PyQt5.QtWidgets import QApplication
from extrator_tabelas_pdf import PDFTableExtractor

class TestPDFTableExtractor(unittest.TestCase):
    
    def setUp(self):
        if not QApplication.instance():
            self.app = QApplication([])
        self.extractor = PDFTableExtractor()
    
    def test_abrir_pdf_valido(self):
        """Testa abertura de PDF v√°lido"""
        with patch('fitz.open') as mock_open:
            mock_doc = MagicMock()
            mock_open.return_value = mock_doc
            
            resultado = self.extractor.abrir_pdf("test.pdf")
            
            self.assertTrue(resultado)
            mock_open.assert_called_once_with("test.pdf")
```

## üåç Tradu√ß√£o

Para adicionar suporte a um novo idioma:

1. Crie arquivo `translations/pt_BR.py` (exemplo)
2. Adicione strings traduzidas
3. Implemente sistema de carregamento
4. Teste com o novo idioma

## üìù Documenta√ß√£o

### Atualizando Documenta√ß√£o

- **README.md**: Informa√ß√µes gerais e uso b√°sico
- **DOCUMENTATION.md**: Documenta√ß√£o t√©cnica detalhada
- **INSTALL.md**: Guias de instala√ß√£o
- **CHANGELOG.md**: Hist√≥rico de mudan√ßas

### Adicionando Screenshots

1. Use formato PNG ou JPG
2. Mantenha resolu√ß√£o entre 800-1200px de largura
3. Salve em `docs/images/` (quando existir)
4. Use nomes descritivos: `interface-principal.png`

## üè∑Ô∏è Versionamento

Seguimos [Semantic Versioning](https://semver.org/):

- **MAJOR** (1.0.0): Mudan√ßas incompat√≠veis
- **MINOR** (0.1.0): Novas funcionalidades compat√≠veis
- **PATCH** (0.0.1): Corre√ß√µes de bugs

## üéâ Reconhecimento

Contribuidores s√£o reconhecidos:

- No README.md
- Nos releases do GitHub
- Em coment√°rios no c√≥digo (para contribui√ß√µes significativas)

## üí¨ Comunica√ß√£o

- **Issues**: Para bugs e sugest√µes
- **Discussions**: Para perguntas gerais
- **Email**: Para quest√µes sens√≠veis

## üìú C√≥digo de Conduta

Este projeto adere ao [Contributor Covenant](https://www.contributor-covenant.org/). Ao participar, voc√™ concorda em manter um ambiente respeitoso e acolhedor.

---

## üôè Agradecimentos

Obrigado por considerar contribuir com o PDF Table Scanner! Sua ajuda √© muito valiosa para tornar esta ferramenta ainda melhor.

**Lembre-se**: Nenhuma contribui√ß√£o √© pequena demais. Desde corre√ß√£o de typos at√© grandes funcionalidades, toda ajuda √© bem-vinda! üöÄ
